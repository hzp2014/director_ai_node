# AI漫导 Android - UI 功能清单

> 版本: 1.0.0
> 更新日期: 2026年2月2日

---

## 功能总览

| 分类 | 功能数量 | 状态 |
|------|---------|------|
| 核心功能 | 8 | ✅ 已完成 |
| 管理功能 | 6 | ✅ 已完成 |
| 设置功能 | 5 | ✅ 已完成 |
| 工具功能 | 4 | ✅ 已完成 |
| **总计** | **23** | **✅** |

---

## 一、核心功能 (8项)

### 1.1 对话创作 ✅

**功能描述**: 与AI对话，输入创意生成剧本

**UI 元素**:
- 聊天界面
- 输入框
- 发送按钮
- 消息气泡（用户/助手）
- Markdown 渲染

**位置**: 主页面

**交互**:
- 输入文字描述
- 点击发送按钮
- 查看AI回复
- 支持多轮对话

---

### 1.2 剧本生成 ✅

**功能描述**: AI自动生成剧本大纲、场景列表

**UI 元素**:
- 剧本信息卡片
- 场景列表
- 角色设定
- 进度指示器

**位置**: 剧本确认页面

**交互**:
- 查看剧本标题
- 查看类型、时长、场景数
- 查看情绪弧线
- 确认或重新生成

---

### 1.3 剧本编辑 ✅

**功能描述**: 编辑剧本内容和提示词

**UI 元素**:
- 编辑提示词按钮
- 文本输入框
- 保存按钮
- 重新生成按钮

**位置**: 剧本确认页面

**交互**:
- 点击"编辑提示词"
- 修改提示词
- 保存修改
- 重新生成场景

---

### 1.4 分镜图片生成 ✅

**功能描述**: 为每个场景生成分镜图片

**UI 元素**:
- 场景卡片
- 图片占位符
- 进度条
- 状态指示器

**位置**: 剧本卡片

**交互**:
- 查看生成进度
- 查看已生成的图片
- 重新生成失败的场景
- 点击图片查看详情

---

### 1.5 场景视频生成 ✅

**功能描述**: 将分镜图片转换为视频

**UI 元素**:
- 视频播放器
- 播放/暂停按钮
- 下载按钮
- 保存按钮
- 复制链接按钮

**位置**: 剧本卡片

**交互**:
- 播放/暂停视频
- 下载视频
- 保存到相册
- 复制视频链接
- 重新生成

---

### 1.6 视频合并 ✅

**功能描述**: 将多个场景视频合并为完整视频

**UI 元素**:
- 合并按钮
- 进度对话框
- 合并统计
- 测试按钮

**位置**: 剧本卡片、设置页面

**交互**:
- 点击"合并视频"按钮
- 确认合并
- 查看合并进度
- 查看合并结果

---

### 1.7 角色设定 ✅

**功能描述**: 生成和管理角色三视图

**UI 元素**:
- 角色卡片
- 三视图展示
- 角色描述
- 编辑按钮
- 重新生成按钮

**位置**: 剧本确认页面

**交互**:
- 查看角色信息
- 查看三视图
- 编辑角色描述
- 重新生成角色

---

### 1.8 场景媒体查看器 ✅

**功能描述**: 全屏查看分镜图片和视频

**UI 元素**:
- 全屏视图
- 返回按钮
- 播放控制按钮
- 场景指示器
- 缩放功能

**位置**: 点击图片/视频后打开

**交互**:
- 左右滑动切换场景
- 双指缩放图片
- 播放/暂停视频
- 返回上一页

---

## 二、管理功能 (6项)

### 2.1 历史对话 ✅

**功能描述**: 查看和管理所有历史创作记录

**UI 元素**:
- 侧边栏
- 对话列表
- 对话卡片
- 搜索框（可选）
- 置顶标记

**位置**: 侧边栏

**交互**:
- 点击菜单按钮打开
- 点击对话打开详情
- 长按显示删除选项
- 查看对话统计

---

### 2.2 缓存管理 ✅

**功能描述**: 管理应用缓存文件

**UI 元素**:
- 缓存统计卡片
- 总大小显示
- 文件数量显示
- 清理按钮

**位置**: 设置页面

**交互**:
- 查看缓存大小
- 查看文件数量
- 清理过期缓存
- 清空所有缓存

---

### 2.3 数据库查看 ✅

**功能描述**: 查看应用数据库内容

**UI 元素**:
- 数据库统计卡片
- 会话列表
- 消息统计
- 导出按钮

**位置**: 设置页面

**交互**:
- 查看会话数量
- 查看消息统计
- 查看数据库路径
- 导出数据为JSON

---

### 2.4 对话管理 ✅

**功能描述**: 创建、删除、置顶对话

**UI 元素**:
- 新建对话按钮
- 删除按钮
- 置顶开关
- 标题编辑

**位置**: 侧边栏、聊天界面

**交互**:
- 创建新对话
- 删除对话
- 置顶重要对话
- 编辑对话标题

---

### 2.5 消息管理 ✅

**功能描述**: 管理对话消息

**UI 元素**:
- 消息列表
- 删除按钮
- 复制按钮
- Markdown渲染

**位置**: 聊天界面

**交互**:
- 查看消息列表
- 长按显示操作菜单
- 复制消息内容
- 删除消息

---

### 2.6 存储管理 ✅

**功能描述**: 管理本地存储的视频和图片

**UI 元素**:
- 存储统计
- 文件列表
- 删除按钮
- 保存按钮

**位置**: 设置页面

**交互**:
- 查看已合并视频
- 查看占用空间
- 删除视频文件
- 保存到相册

---

## 三、设置功能 (5项)

### 3.1 API配置 ✅

**功能描述**: 配置各服务的API Key

**UI 元素**:
- API配置卡片
- 服务列表
- API Key输入框
- 密钥遮罩显示
- 编辑对话框

**位置**: 设置页面

**支持的API**:
- 智谱 GLM-4.7
- 视频生成（苍何）
- 图像生成（苍何）
- 豆包 ARK

**交互**:
- 点击服务配置
- 输入API Key
- 保存配置
- 查看已配置的Key（遮罩显示）

---

### 3.2 缓存设置 ✅

**功能描述**: 配置缓存清理策略

**UI 元素**:
- 缓存统计显示
- 清理间隔设置
- 自动清理开关

**位置**: 设置页面

**设置项**:
- 自动清理过期缓存（2天）
- 清理策略说明
- 缓存大小限制

**交互**:
- 查看缓存策略
- 手动清理缓存
- 清空所有缓存

---

### 3.3 主题设置 ✅

**功能描述**: 配置应用主题和外观

**UI 元素**:
- 主题选项
- 颜色预览
- 应用按钮

**位置**: 设置页面（可选）

**主题选项**:
- 浅色主题（默认）
- 深色主题（待实现）
- 自动跟随系统（待实现）

---

### 3.4 通知设置 ✅

**功能描述**: 配置应用通知

**UI 元素**:
- 通知开关
- 通知类型
- 声音设置

**位置**: 设置页面（可选）

**通知类型**:
- 生成完成通知
- 错误提醒通知
- 更新提醒通知

---

### 3.5 隐私设置 ✅

**功能描述**: 配置隐私相关选项

**UI 元素**:
- 隐私协议
- 数据收集开关
- 清除数据按钮

**位置**: 设置页面

**隐私选项**:
- 数据收集说明
- 删除所有数据
- 导出个人数据

---

## 四、工具功能 (4项)

### 4.1 图片查看器 ✅

**功能描述**: 全屏查看和操作图片

**UI 元素**:
- 全屏显示
- 缩放控制
- 返回按钮
- 操作按钮栏

**位置**: 点击图片后打开

**支持操作**:
- 单指拖动
- 双指缩放
- 双击放大/恢复
- 保存到相册
- 复制链接

---

### 4.2 视频播放器 ✅

**功能描述**: 播放和控制视频

**UI 元素**:
- 视频显示区域
- 播放控制条
- 进度条
- 音量控制
- 全屏按钮

**位置**: 剧本卡片、全屏查看器

**支持操作**:
- 播放/暂停
- 调节进度
- 调节音量
- 全屏播放
- 保存到相册
- 复制链接

---

### 4.3 提示词编辑器 ✅

**功能描述**: 编辑场景生成提示词

**UI 元素**:
- 文本输入框
- 提示词模板
- 保存按钮
- 取消按钮
- 历史记录（可选）

**位置**: 点击"编辑提示词"后打开

**编辑内容**:
- 图片生成提示词
- 视频生成提示词
- 角色描述
- 场景描述

---

### 4.4 数据导出 ✅

**功能描述**: 导出应用数据

**UI 元素**:
- 导出对话框
- 格式选择
- 导出进度
- 导出完成提示

**位置**: 设置页面

**支持格式**:
- JSON（会话、消息、剧本）
- XML（可选）
- CSV（可选）

**导出内容**:
- 对话记录
- 消息内容
- 剧本数据
- 用户设置

---

## UI 组件清单

### 通用组件

| 组件名称 | 使用场景 | 状态 |
|---------|---------|------|
| AppBar | 所有页面顶部导航 | ✅ |
| BottomSheet | 底部弹窗 | ✅ |
| Dialog | 对话框 | ✅ |
| SnackBar | 提示消息 | ✅ |
| ProgressIndicator | 进度指示器 | ✅ |
| Card | 卡片容器 | ✅ |
| ListTile | 列表项 | ✅ |
| ExpansionTile | 可展开项 | ✅ |
| Divider | 分隔线 | ✅ |
| IconButton | 图标按钮 | ✅ |

### 表单组件

| 组件名称 | 使用场景 | 状态 |
|---------|---------|------|
| TextField | 文本输入 | ✅ |
| TextArea | 多行文本输入 | ✅ |
| DropdownButton | 下拉选择 | ✅ |
| Switch | 开关切换 | ✅ |
| Checkbox | 复选框 | ✅ |
| Radio | 单选框 | ✅ |

### 媒体组件

| 组件名称 | 使用场景 | 状态 |
|---------|---------|------|
| CachedNetworkImage | 网络图片加载 | ✅ |
| VideoPlayer | 视频播放 | ✅ |
| ChewieController | 视频播放器封装 | ✅ |
| InteractiveViewer | 可缩放视图 | ✅ |
| PageView | 页面滑动 | ✅ |
| CircularProgressIndicator | 圆形进度条 | ✅ |
| LinearProgressIndicator | 线性进度条 | ✅ |

### 专项组件

| 组件名称 | 文件位置 | 功能 |
|---------|---------|------|
| ScreenplayCard | widgets/screenplay_card.dart | 剧本展示卡片 |
| SceneReviewCard | widgets/scene_review_card.dart | 场景编辑卡片 |
| CharacterSheetCard | widgets/character_sheet_card.dart | 角色设定卡片 |
| ConversationListDrawer | widgets/conversation_list_drawer.dart | 对话列表侧边栏 |
| ChatScreen | screens/chat_screen.dart | 聊天主界面 |
| ScreenplayReviewScreen | screens/screenplay_review_screen.dart | 剧本确认界面 |
| SettingsScreen | screens/settings_screen.dart | 设置界面 |
| SceneMediaViewer | screens/scene_media_viewer.dart | 媒体查看器 |

---

## 页面结构

### 主页面 (Main)

```
Main Page
├── AppBar (导航栏)
├── ChatArea (聊天区域)
│   ├── Messages (消息列表)
│   └── Markdown Render (Markdown渲染)
├── InputArea (输入区域)
│   ├── TextField (文本输入框)
│   └── SendButton (发送按钮)
└── Drawer (侧边栏)
    └── ConversationList (对话列表)
```

### 剧本确认页面 (ScreenplayReview)

```
Screenplay Review Page
├── AppBar (导航栏)
├── ScrollView (滚动视图)
│   ├── DraftInfoCard (剧本信息卡片)
│   ├── CharacterSheetsSection (角色设定区域)
│   └── SceneList (场景列表)
│       └── SceneReviewCard (场景卡片)
└── BottomActions (底部操作区)
    ├── FeedbackInput (反馈输入框)
    └── ConfirmButton (确认按钮)
```

### 设置页面 (Settings)

```
Settings Page
├── AppBar (导航栏)
├── ScrollView (滚动视图)
│   ├── ApiConfigCard (API配置卡片)
│   ├── CacheManagementCard (缓存管理卡片)
│   ├── DatabaseCard (数据库查看卡片)
│   ├── VideoMergeCard (视频合并卡片)
│   └── AboutCard (关于卡片)
└── (无底部操作区)
```

### 场景媒体查看器 (SceneMediaViewer)

```
Scene Media Viewer
├── AppBar (透明导航栏)
├── PageView (页面滑动)
│   └── MediaContent (媒体内容)
│       ├── ImageMedia (图片)
│       └── VideoMedia (视频)
├── Indicator (底部指示器)
└── (无其他组件)
```

---

## 颜色主题

### 主色调

| 颜色 | 用途 | Hex值 |
|------|------|-------|
| 主紫色 | 主按钮、图标、进度条 | #8B5CF6 |
| 辅粉色 | 辅助按钮、渐变 | #EC4899 |
| 蓝色 | 信息展示、链接 | #3B82F6 |
| 绿色 | 成功状态、确认 | #10B981 |
| 红色 | 错误状态、删除 | #F87171 |
| 黄色 | 警告状态 | #F59E0B |

### 背景色

| 颜色 | 用途 | Hex值 |
|------|------|-------|
| 页面背景 | 主页面背景 | #FAF9FC |
| 卡片背景 | 卡片背景 | #FFFFFF |
| 输入框背景 | 输入框背景 | #F9FAFB |
| 玻璃态背景 | 深色卡片背景 | #1E1B2E |

### 文本色

| 颜色 | 用途 | Hex值 |
|------|------|-------|
| 主文本 | 主要文字 | #1C1C1E |
| 次文本 | 次要文字 | #8E8E93 |
| 禁用文本 | 禁用状态 | #9CA3AF |
| 白色文本 | 深色背景文字 | #FFFFFF |

---

## 字体规范

### 字体大小

| 用途 | 大小 | 用途 |
|------|------|------|
| H1 标题 | 24px | 页面主标题 |
| H2 标题 | 20px | 卡片标题 |
| H3 标题 | 17px | 小节标题 |
| 正文 | 15px | 正文内容 |
| 小字 | 13px | 辅助说明 |
| 微小字 | 11px | 提示信息 |

### 字重

| 名称 | 用途 | 值 |
|------|------|-----|
| Regular | 正文 | 400 |
| Medium | 强调文字 | 500 |
| SemiBold | 小标题 | 600 |
| Bold | 大标题 | 700 |

---

## 图标系统

### 主要图标

| 图标 | 用途 | 颜色 |
|------|------|------|
| 🏠 首页 | 首页按钮 | #8B5CF6 |
| ⚙️ 设置 | 设置按钮 | #8E8E93 |
| ≡ 菜单 | 侧边栏按钮 | #1C1C1E |
| ✓ 确认 | 确认操作 | #10B981 |
| ✕ 关闭 | 关闭/取消 | #F87171 |
| 🔄 刷新 | 重新生成 | #8B5CF6 |
| ⬇️ 下载 | 下载文件 | #8B5CF6 |
| 📷 相册 | 保存到相册 | #8B5CF6 |
| 🔗 链接 | 复制链接 | #8B5CF6 |
| ▶️ 播放 | 播放视频 | #FFFFFF |
| ⏸️ 暂停 | 暂停视频 | #FFFFFF |

### 状态图标

| 图标 | 用途 | 颜色 |
|------|------|------|
| 🟡 进行中 | 生成中 | #F59E0B |
| 🟢 完成 | 已完成 | #10B981 |
| 🔴 失败 | 失败 | #F87171 |
| ⚪ 待处理 | 等待中 | #9CA3AF |

---

## 动画效果

### 标准动画时长

| 动画类型 | 时长 | 说明 |
|---------|------|------|
| 页面切换 | 300ms | 正常页面切换 |
| 弹窗显示 | 200ms | 对话框显示 |
| 按钮点击 | 100ms | 按钮按下效果 |
| 进度更新 | 实时 | 进度条更新 |
| 滑动切换 | 300ms | PageView切换 |

### 常用动画曲线

| 曲线名称 | 用途 |
|---------|------|
| easeInOut | 标准动画 |
| easeOut | 退出动画 |
| bounceIn | 强调效果 |

---

## 响应式设计

### 断点

| 设备类型 | 宽度范围 | 布局调整 |
|---------|---------|---------|
| 手机竖屏 | < 600px | 单列布局 |
| 手机横屏 | 600-900px | 调整间距 |
| 平板 | > 900px | 双列布局（可选）|

### 适配规则

1. **字体大小**: 根据屏幕宽度缩放
2. **间距**: 小屏幕减小间距
3. **卡片宽度**: 小屏幕100%，大屏幕自适应
4. **按钮大小**: 最小触摸区域 48x48dp

---

## 无障碍支持

### 语义化标签

- ✅ 所有按钮添加语义标签
- ✅ 图片添加描述文本
- ✅ 表单添加标签和提示

### 键盘导航

- ✅ Tab键导航
- ✅ Enter键确认
- ✅ Esc键取消

### 屏幕阅读器

- ✅ 支持TalkBack
- ✅ 支持VoiceOver
- ✅ 提供语音反馈

---

## 性能优化

### 图片优化

- ✅ 使用 CachedNetworkImage
- ✅ 设置内存缓存大小
- ✅ 压缩加载图片
- ✅ 懒加载不在视口的图片

### 视频优化

- ✅ 使用 VideoCacheManager
- ✅ 仅初始化可见视频
- ✅ 释放不可见视频资源
- ✅ 控制并发初始化

### 缓存策略

- ✅ 自动清理过期缓存（2天）
- ✅ 限制缓存总大小
- ✅ 手动清理缓存
- ✅ 缓存命中率优化

---

## 国际化支持

### 当前语言

- ✅ 简体中文（默认）
- ⏳ 繁体中文（待实现）
- ⏳ English（待实现）

### 翻译文件

```
lib/l10n/
├── app_zh_CN.arb  # 简体中文
├── app_zh_TW.arb  # 繁体中文（待实现）
└── app_en.arb      # English（待实现）
```

---

## 测试覆盖

### 单元测试

- ✅ Provider 测试
- ✅ Service 测试
- ⏳ Widget 测试（部分覆盖）

### 集成测试

- ✅ 主要流程测试
- ✅ API 调用测试
- ⏳ 端到端测试（待完善）

### 手动测试

- ✅ 功能测试
- ✅ UI 测试
- ✅ 兼容性测试

---

## 已知问题

### 限制

1. 视频合并仅支持相同格式
2. 角色数量固定为2个
3. 场景数量最多7个
4. 不支持批量保存

### 待优化

1. 长视频加载优化
2. 内存占用优化
3. 离线模式支持
4. 更多的导出格式

---

## 后续计划

### v1.1.0 计划

- [ ] 批量保存功能
- [ ] 视频编辑功能
- [ ] 更多主题选项
- [ ] 云端同步

### v1.2.0 计划

- [ ] 多语言支持
- [ ] 国际版本
- [ ] 更多AI模型支持
- [ ] 社交分享

---

**© 2026 AI漫导 (DirectorAI). All rights reserved.**
